@using BlazorBlogging.Shared.Models

<div class="blog-detail">
    <div class="blog-detail-bar">
        <div style="flex: 1;">
            <MudChip T="string" Icon="@Icons.Material.Filled.ArrowBack" Color="Color.Tertiary"
                     Variant="Variant.Outlined" Size="Size.Small" OnClick="OnBack" Style="cursor: pointer;">
                Back to posts
            </MudChip>
        </div>
        <div class="d-flex align-center gap-2">
            <MudText Typo="Typo.caption" Style="font-weight: 600;">
                @Post.Title
            </MudText>
            <MudText Typo="Typo.caption" Color="Color.Secondary">&middot;</MudText>
            <MudText Typo="Typo.caption" Color="Color.Secondary">
                @Post.CreatedAt.ToString("MMMM dd, yyyy")
            </MudText>
            <MudText Typo="Typo.caption" Color="Color.Secondary">&middot;</MudText>
            <MudText Typo="Typo.caption" Color="Color.Secondary">
                @ReadTime min read
            </MudText>
        </div>
        <div style="flex: 1;"></div>
    </div>

    <div class="blog-detail-content">
        <BlogContentView Content="@Content" />
    </div>
</div>

@code {
    [Parameter, EditorRequired] public BlogPostSummary Post { get; set; } = default!;
    [Parameter] public string Content { get; set; } = "";
    [Parameter] public EventCallback OnBack { get; set; }

    private int ReadTime => Math.Max(1, (Content?.Split(' ', StringSplitOptions.RemoveEmptyEntries).Length ?? 0) / 200);
}
